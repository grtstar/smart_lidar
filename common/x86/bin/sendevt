#!/usr/bin/python

import lcm
import mars_message
import sys

def toEvent(evt):
    try:
        if int(evt) == 0:
            return 0
    except:
        return ord(evt[0])<<24 | ord(evt[1])<<16 | ord(evt[2])<<8 | ord(evt[3])

def main():
    lc = lcm.LCM()
    e:mars_message.Event  = mars_message.Event()
    if(len(sys.argv)  < 2):
        print("Usage: sendevt [topic] [event] [param](optional)")
        return
    e.event = toEvent(sys.argv[2])
    e.param = 0 if len(sys.argv)<4 else int(sys.argv[3]) 
    lc.publish(sys.argv[1], e.encode())

if __name__ == "__main__":
    main()
